<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/" />
    </ion-buttons>
    <ion-title>Hotel Groups</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="console-page">
    <section class="console-hero">
      <div>
        <p class="console-eyebrow">Platform Structure</p>
        <h1>Hotel groups</h1>
        <p>
          Define the top-level operating groups that own the hotels, approvals, and admin scope
          beneath them.
        </p>
      </div>
      <div class="console-meta">
        <span class="console-pill">{{ items().length }} group(s)</span>
        <span class="console-pill">{{ form.id ? 'Editing existing group' : 'Creating new group' }}</span>
      </div>
    </section>

    <div class="console-grid">
    <ion-card class="console-card">
      <ion-card-header>
        <ion-card-title>{{ form.id ? 'Edit Hotel Group' : 'Create Hotel Group' }}</ion-card-title>
        <p class="section-copy">Use stable names and optional short codes for invitations and routing.</p>
      </ion-card-header>
      <ion-card-content>
        <form class="console-form" (ngSubmit)="save()">
          <div class="console-toolbar">
            <div class="console-meta">
              <span class="console-pill">Code can be auto-generated later</span>
            </div>
          </div>
          <div class="form-grid">
            <ion-item class="field-item">
              <ion-label position="stacked">Name</ion-label>
              <ion-input [(ngModel)]="form.name" name="name" placeholder="Group name" required />
            </ion-item>
            <ion-item class="field-item">
              <ion-label position="stacked">Code</ion-label>
              <ion-input [(ngModel)]="form.code" name="code" placeholder="Optional code" />
            </ion-item>
          </div>

          <div class="form-actions">
            <ion-button type="submit" [disabled]="saving()">
              {{ saving() ? 'Saving...' : form.id ? 'Update' : 'Create' }}
            </ion-button>
            <ion-button type="button" fill="outline" (click)="resetForm()">Reset</ion-button>
            <ion-button type="button" fill="clear" (click)="load()">Refresh</ion-button>
          </div>
        </form>
        @if (error()) {
          <p class="error-text">{{ error() }}</p>
        }
      </ion-card-content>
    </ion-card>

    <ion-card class="console-card">
      <ion-card-header>
        <ion-card-title>Records</ion-card-title>
        <p class="section-copy">Existing groups that can own hotels and scoped admin permissions.</p>
      </ion-card-header>
      <ion-card-content>
        @if (loading()) {
          <p class="empty-text">Loading...</p>
        } @else {
          <div class="console-list">
            @for (item of items(); track item.id ?? item.name) {
              <article class="console-record">
                  <h3>{{ item.name }}</h3>
                  <div class="record-metadata">
                    <span class="console-pill">Code: {{ item.code || '-' }}</span>
                  </div>
                  <div class="inline-actions">
                    <ion-button type="button" fill="outline" class="inline-neutral" size="small" (click)="edit(item)">
                      Edit
                    </ion-button>
                    <ion-button type="button" fill="outline" class="inline-danger" size="small" (click)="remove(item)">
                      Delete
                    </ion-button>
                  </div>
              </article>
            } @empty {
              <p class="empty-text">No hotel groups found.</p>
            }
          </div>
        }
      </ion-card-content>
    </ion-card>
    </div>
  </div>
</ion-content>
